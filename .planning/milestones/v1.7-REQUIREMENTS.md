# Requirements Archive: v1.7 MemberHeader API

**Archived:** 2026-01-28
**Status:** âœ… SHIPPED

This is the archived requirements specification for v1.7.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Sportlink Sync

**Defined:** 2026-01-28
**Core Value:** Keep downstream systems automatically in sync with Sportlink member data without manual intervention

## v1.7 Requirements

Requirements for MemberHeader API milestone. Each maps to roadmap phases.

### Data Capture

- [x] **DATA-01**: Capture MemberHeader API response when visiting `/other` page (alongside existing MemberFreeFields capture)
- [x] **DATA-02**: Extract `HasFinancialTransferBlockOwnClub` boolean from MemberHeader response
- [x] **DATA-03**: Extract `Photo.Url` and `Photo.PhotoDate` from MemberHeader response
- [x] **DATA-04**: Store captured data in SQLite database for downstream sync

### Financial Block

- [x] **FINB-01**: Store financial block status (`has_financial_block` boolean) in stadion_members table
- [x] **FINB-02**: Sync financial block status to Stadion `financiele-blokkade` ACF field
- [x] **FINB-03**: Include financial block changes in hash-based change detection

### Photo Optimization

- [x] **PHOT-01**: Fetch photos directly from `Photo.Url` instead of browser DOM scraping
- [x] **PHOT-02**: Use `Photo.PhotoDate` for change detection (skip re-download if date unchanged)
- [x] **PHOT-03**: Handle members without photos (null/missing Photo object)
- [x] **PHOT-04**: Remove browser-based photo download code (`download-photos-from-sportlink.js`)
- [x] **PHOT-05**: Maintain existing photo upload/deletion flow to Stadion

## Future Requirements

Deferred to future milestones. Tracked but not in current roadmap.

(None identified)

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Photo caching/CDN | Direct URL fetch is sufficient, Sportlink hosts the images |
| Batch photo API calls | MemberHeader is per-member, no batch endpoint available |
| Financial block sync to FreeScout | FreeScout doesn't have this field concept |
| Historical financial block tracking | Current state only, not history |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| DATA-01 | Phase 17 | Complete |
| DATA-02 | Phase 17 | Complete |
| DATA-03 | Phase 17 | Complete |
| DATA-04 | Phase 17 | Complete |
| FINB-01 | Phase 18 | Complete |
| FINB-02 | Phase 18 | Complete |
| FINB-03 | Phase 18 | Complete |
| PHOT-01 | Phase 19 | Complete |
| PHOT-02 | Phase 19 | Complete |
| PHOT-03 | Phase 19 | Complete |
| PHOT-04 | Phase 19 | Complete |
| PHOT-05 | Phase 19 | Complete |

**Coverage:**
- v1.7 requirements: 12 total
- Mapped to phases: 12
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 12 of 12 v1.7 requirements
**Adjusted:** None
**Dropped:** None

---

*Archived: 2026-01-28 as part of v1.7 milestone completion*

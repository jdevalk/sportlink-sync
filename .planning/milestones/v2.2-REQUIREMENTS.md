# Requirements Archive: v2.2 Discipline Cases

**Archived:** 2026-02-03
**Status:** SHIPPED

This is the archived requirements specification for v2.2.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Sportlink Sync v2.2

**Defined:** 2026-02-02
**Core Value:** Keep downstream systems automatically in sync with Sportlink member data without manual intervention

## v2.2 Requirements

Requirements for discipline case sync. Each maps to roadmap phases.

### Download & Storage

- [x] **DISC-01**: Download discipline cases from Sportlink `/competition-affairs/discipline-cases`
- [x] **DISC-02**: Click "Individuele tuchtzaken" tab and capture DisciplineClubCasesPlayer API response
- [x] **DISC-03**: Store cases in SQLite with all fields (DossierId, PublicPersonId, MatchDate, MatchDescription, TeamName, ChargeCodes, ChargeDescription, SanctionDescription, ProcessingDate, AdministrativeFee, IsCharged)

### Stadion Sync

- [x] **DISC-04**: Create/update discipline-cases as Stadion custom post type
- [x] **DISC-05**: Map all case fields to Stadion ACF fields
- [x] **DISC-06**: Link case to person via ACF relationship field (using PublicPersonId -> stadion_id mapping)

### Season Organization

- [x] **DISC-09**: Derive season from case date (Aug 1 = new season boundary)
- [x] **DISC-10**: Create season category if it doesn't exist (e.g., "2025-2026")
- [x] **DISC-11**: Assign cases to appropriate season category

### Pipeline Integration

- [x] **DISC-12**: Weekly sync schedule (cron)
- [x] **DISC-13**: Include discipline case stats in email report
- [x] **DISC-14**: Add `scripts/sync.sh discipline` command

## Out of Scope

| Feature | Reason |
|---------|--------|
| Bidirectional sync | Cases are read-only from Sportlink, no editing in Stadion |
| Case deletion | Cases persist in Stadion even if removed from Sportlink (historical record) |
| Team discipline cases | Only individual cases ("Individuele tuchtzaken"), not team cases |
| Real-time sync | Weekly batch sync sufficient for rare disciplinary events |
| Player card on case page (DISC-07) | Stadion theme/plugin work, not sync code — deferred to Stadion codebase |
| Cases list on player page (DISC-08) | Stadion theme/plugin work, not sync code — deferred to Stadion codebase |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DISC-01 | Phase 30 | Complete |
| DISC-02 | Phase 30 | Complete |
| DISC-03 | Phase 30 | Complete |
| DISC-04 | Phase 31 | Complete |
| DISC-05 | Phase 31 | Complete |
| DISC-06 | Phase 31 | Complete |
| DISC-09 | Phase 31 | Complete |
| DISC-10 | Phase 31 | Complete |
| DISC-11 | Phase 31 | Complete |
| DISC-12 | Phase 32 | Complete |
| DISC-13 | Phase 32 | Complete |
| DISC-14 | Phase 32 | Complete |

**Coverage:**
- v2.2 requirements: 12 total (2 deferred to Stadion codebase)
- Mapped to phases: 12
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 12 of 12 v2.2 requirements

**Deferred to Stadion codebase:**
- DISC-07: Player card on discipline case page
- DISC-08: Discipline cases list on player profile page

**Adjusted:** None

**Dropped:** None

---
*Archived: 2026-02-03 as part of v2.2 milestone completion*
